---
import { SITE_TITLE, SITE_DESCRIPTION } from '../profile';
import { getCollection } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import StoryCard from '@components/StoryCard.astro';

const allStories = await getCollection('stories');
const recentStories = allStories
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 6);
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<main class"stack">
	<div class="hero">
		<p>Welcome to my stories! These are personal accounts I write for fun. Let's call them based on a mostly true story. Enjoy!</p>
	</div>

	<hr />
	
	{recentStories.map((story) => (
		<StoryCard story={story} />
	))}
	<div class="archive-link">
		<a href="/stories">View All Stories â†’</a>
	</div>

</main>	
	<style>
		.hero {
			padding: var(--s1);
			font-size: var(--s1);
			margin: auto;
			max-width: 900px;
		}
		
		.archive-link {
			text-align: center;
			margin-top: var(--s3);
		}
		.archive-link a {
			display: inline-block;
			padding: 0.5rem 1rem;
			text-decoration: none;
			color: inherit;
			border: 1px solid var(--color-accent);
			border-radius: 0.05em;
			transition: all 0.2s;
		}

		.archive-link a:hover {
			background: var(--color-accent);
			color: var(--color-text);
		}
	</style>
</BaseLayout>
